{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { // Card,\nCardContent, Typography, Box, FormControl, FormLabel, FormControlLabel, RadioGroup, Radio } from '@material-ui/core';\nimport { withTheme } from '@material-ui/core/styles';\nimport { blue } from '@material-ui/core/colors';\nimport Head from 'next/head';\nimport { Pagination } from '@material-ui/lab';\nimport { Button, Background, Card, CardTitle, CardFooter, CardActions, QuestionTitle } from './styles';\nimport dataJSON from '../../data.json';\nimport resultsJSON from '../../results.json';\nimport quizRepository from '../../repository/quiz/quizRepository';\n\nArray.prototype.shuffle = function () {\n  var i = this.length,\n      j,\n      temp;\n  if (i == 0) return this;\n\n  while (--i) {\n    j = Math.floor(Math.random() * (i + 1));\n    temp = this[i];\n    this[i] = this[j];\n    this[j] = temp;\n  }\n\n  return this;\n};\n\nconst Quiz = ({\n  data,\n  results\n}) => {\n  const {\n    0: currentQuestion,\n    1: setCurrentQuestion\n  } = useState(0);\n  const {\n    0: value,\n    1: setValue\n  } = useState(-1);\n  const {\n    0: answers,\n    1: setAnswers\n  } = useState([]);\n  const {\n    0: result,\n    1: setResult\n  } = useState(false);\n  useEffect(() => {\n    setValue(answers[currentQuestion] || -1);\n  }, [currentQuestion]);\n\n  const setCurrentAnswer = () => {\n    let newAnswers = [...answers];\n    newAnswers[currentQuestion] = value;\n    setAnswers(newAnswers);\n  };\n\n  const getFinalValue = () => {\n    let sum = 0;\n    data.forEach((question, index) => {\n      if (answers[index] && answers[index] >= 0) sum += question.answers[answers[index]].value;\n    });\n    return sum;\n  };\n\n  const handleChange = value => {\n    setCurrentAnswer();\n\n    if (value >= data.length) {\n      console.log(answers);\n      const media = getFinalValue() / data.length;\n      if (media < 36) setResult(results[0]);else if (media < 71) setResult(results[1]);else setResult(results[2]);\n      return;\n    }\n\n    setCurrentQuestion(value);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"/pages/quiz/styles.css\"\n  })), __jsx(Background, {\n    color: \"#456\"\n  }, __jsx(Card, {\n    className: \"card\"\n  }, __jsx(CardContent, null, __jsx(CardTitle, {\n    gutterBottom: true\n  }, \"Que tipo de empreendedor \\xE9 voc\\xEA durante a crise?\"), __jsx(\"hr\", null), __jsx(\"p\", {\n    id: \"question\"\n  }), __jsx(\"form\", {\n    id: \"answers\",\n    action: \"#\"\n  })), __jsx(CardActions, null, result && __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: result\n    }\n  }), !result && data && __jsx(\"form\", {\n    action: \"#\"\n  }, __jsx(QuestionTitle, null, data[currentQuestion].question), __jsx(FormControl, {\n    component: \"fieldset\"\n  }, __jsx(RadioGroup, {\n    \"aria-label\": \"answer\",\n    name: \"answer\",\n    onChange: event => {\n      setValue(event.target.value);\n    },\n    value: value\n  }, data[currentQuestion].answers.map((answer, index) => __jsx(FormControlLabel, {\n    key: index,\n    value: `${index}`,\n    control: __jsx(Radio, {\n      color: \"primary\"\n    }),\n    label: answer.text\n  })))))), !result && __jsx(CardFooter, null, __jsx(\"hr\", null), __jsx(Button, {\n    onClick: () => {\n      handleChange(currentQuestion + 1);\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    className: 'button'\n  }, currentQuestion === data.length - 1 ? 'Finalizar e Visualizar Resultado' : 'Próxima Pergunta'), __jsx(Pagination, {\n    page: currentQuestion + 1,\n    color: \"primary\",\n    style: {\n      marginTop: 40\n    },\n    count: data.length,\n    onChange: (event, value) => {\n      handleChange(value - 1);\n    }\n  })))));\n};\n\nexport async function getServerSideProps(context) {\n  const {\n    id\n  } = context.query;\n  const quiz = await quizRepository.getQuiz(id);\n\n  if (!quiz) {\n    console.log('Quiz não existe!!!');\n    return {\n      props: {\n        data: {},\n        results: {}\n      }\n    };\n  }\n\n  console.log(quiz.questions);\n  let shuffledData = [...quiz.questions];\n  shuffledData.map(question => {\n    let shuffledQuestion = _objectSpread({}, question);\n\n    shuffledQuestion.answers = shuffledQuestion.answers.shuffle();\n    return shuffledQuestion;\n  });\n  return {\n    props: {\n      data: shuffledData,\n      results: resultsJSON\n    }\n  };\n}\nexport default withTheme(Quiz);","map":{"version":3,"sources":["/Users/enricorobazza/Documents/Trabalho/Quiz/pages/quiz/[id].js"],"names":["React","useState","useEffect","CardContent","Typography","Box","FormControl","FormLabel","FormControlLabel","RadioGroup","Radio","withTheme","blue","Head","Pagination","Button","Background","Card","CardTitle","CardFooter","CardActions","QuestionTitle","dataJSON","resultsJSON","quizRepository","Array","prototype","shuffle","i","length","j","temp","Math","floor","random","Quiz","data","results","currentQuestion","setCurrentQuestion","value","setValue","answers","setAnswers","result","setResult","setCurrentAnswer","newAnswers","getFinalValue","sum","forEach","question","index","handleChange","console","log","media","__html","event","target","map","answer","text","marginTop","getServerSideProps","context","id","query","quiz","getQuiz","props","questions","shuffledData","shuffledQuestion"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SACE;AACAC,WAFF,EAGEC,UAHF,EAIEC,GAJF,EAKEC,WALF,EAMEC,SANF,EAOEC,gBAPF,EAQEC,UARF,EASEC,KATF,QAUO,mBAVP;AAWA,SAASC,SAAT,QAA0B,0BAA1B;AACA,SAASC,IAAT,QAAqB,0BAArB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SACEC,MADF,EAEEC,UAFF,EAGEC,IAHF,EAIEC,SAJF,EAKEC,UALF,EAMEC,WANF,EAOEC,aAPF,QAQO,UARP;AASA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AAEA,OAAOC,cAAP,MAA2B,sCAA3B;;AAEAC,KAAK,CAACC,SAAN,CAAgBC,OAAhB,GAA0B,YAAY;AACpC,MAAIC,CAAC,GAAG,KAAKC,MAAb;AAAA,MACEC,CADF;AAAA,MAEEC,IAFF;AAGA,MAAIH,CAAC,IAAI,CAAT,EAAY,OAAO,IAAP;;AACZ,SAAO,EAAEA,CAAT,EAAY;AACVE,IAAAA,CAAC,GAAGE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBN,CAAC,GAAG,CAArB,CAAX,CAAJ;AACAG,IAAAA,IAAI,GAAG,KAAKH,CAAL,CAAP;AACA,SAAKA,CAAL,IAAU,KAAKE,CAAL,CAAV;AACA,SAAKA,CAAL,IAAUC,IAAV;AACD;;AACD,SAAO,IAAP;AACD,CAZD;;AAcA,MAAMI,IAAI,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,KAAuB;AAClC,QAAM;AAAA,OAACC,eAAD;AAAA,OAAkBC;AAAlB,MAAwCtC,QAAQ,CAAC,CAAD,CAAtD;AACA,QAAM;AAAA,OAACuC,KAAD;AAAA,OAAQC;AAAR,MAAoBxC,QAAQ,CAAC,CAAC,CAAF,CAAlC;AACA,QAAM;AAAA,OAACyC,OAAD;AAAA,OAAUC;AAAV,MAAwB1C,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM;AAAA,OAAC2C,MAAD;AAAA,OAASC;AAAT,MAAsB5C,QAAQ,CAAC,KAAD,CAApC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACduC,IAAAA,QAAQ,CAACC,OAAO,CAACJ,eAAD,CAAP,IAA4B,CAAC,CAA9B,CAAR;AACD,GAFQ,EAEN,CAACA,eAAD,CAFM,CAAT;;AAIA,QAAMQ,gBAAgB,GAAG,MAAM;AAC7B,QAAIC,UAAU,GAAG,CAAC,GAAGL,OAAJ,CAAjB;AACAK,IAAAA,UAAU,CAACT,eAAD,CAAV,GAA8BE,KAA9B;AACAG,IAAAA,UAAU,CAACI,UAAD,CAAV;AACD,GAJD;;AAMA,QAAMC,aAAa,GAAG,MAAM;AAC1B,QAAIC,GAAG,GAAG,CAAV;AACAb,IAAAA,IAAI,CAACc,OAAL,CAAa,CAACC,QAAD,EAAWC,KAAX,KAAqB;AAChC,UAAIV,OAAO,CAACU,KAAD,CAAP,IAAkBV,OAAO,CAACU,KAAD,CAAP,IAAkB,CAAxC,EACEH,GAAG,IAAIE,QAAQ,CAACT,OAAT,CAAiBA,OAAO,CAACU,KAAD,CAAxB,EAAiCZ,KAAxC;AACH,KAHD;AAIA,WAAOS,GAAP;AACD,GAPD;;AASA,QAAMI,YAAY,GAAIb,KAAD,IAAW;AAC9BM,IAAAA,gBAAgB;;AAChB,QAAIN,KAAK,IAAIJ,IAAI,CAACP,MAAlB,EAA0B;AACxByB,MAAAA,OAAO,CAACC,GAAR,CAAYb,OAAZ;AACA,YAAMc,KAAK,GAAGR,aAAa,KAAKZ,IAAI,CAACP,MAArC;AACA,UAAI2B,KAAK,GAAG,EAAZ,EAAgBX,SAAS,CAACR,OAAO,CAAC,CAAD,CAAR,CAAT,CAAhB,KACK,IAAImB,KAAK,GAAG,EAAZ,EAAgBX,SAAS,CAACR,OAAO,CAAC,CAAD,CAAR,CAAT,CAAhB,KACAQ,SAAS,CAACR,OAAO,CAAC,CAAD,CAAR,CAAT;AACL;AACD;;AACDE,IAAAA,kBAAkB,CAACC,KAAD,CAAlB;AACD,GAXD;;AAaA,SACE,4BACE,MAAC,IAAD,QACE;AAAM,IAAA,GAAG,EAAC,YAAV;AAAuB,IAAA,IAAI,EAAC;AAA5B,IADF,CADF,EAIE,MAAC,UAAD;AAAY,IAAA,KAAK,EAAC;AAAlB,KACE,MAAC,IAAD;AAAM,IAAA,SAAS,EAAC;AAAhB,KACE,MAAC,WAAD,QACE,MAAC,SAAD;AAAW,IAAA,YAAY;AAAvB,8DADF,EAIE,iBAJF,EAKE;AAAG,IAAA,EAAE,EAAC;AAAN,IALF,EAME;AAAM,IAAA,EAAE,EAAC,SAAT;AAAmB,IAAA,MAAM,EAAC;AAA1B,IANF,CADF,EASE,MAAC,WAAD,QACGI,MAAM,IAAI;AAAK,IAAA,uBAAuB,EAAE;AAAEa,MAAAA,MAAM,EAAEb;AAAV;AAA9B,IADb,EAEG,CAACA,MAAD,IAAWR,IAAX,IACC;AAAM,IAAA,MAAM,EAAC;AAAb,KACE,MAAC,aAAD,QAAgBA,IAAI,CAACE,eAAD,CAAJ,CAAsBa,QAAtC,CADF,EAEE,MAAC,WAAD;AAAa,IAAA,SAAS,EAAC;AAAvB,KACE,MAAC,UAAD;AACE,kBAAW,QADb;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,QAAQ,EAAGO,KAAD,IAAW;AACnBjB,MAAAA,QAAQ,CAACiB,KAAK,CAACC,MAAN,CAAanB,KAAd,CAAR;AACD,KALH;AAME,IAAA,KAAK,EAAEA;AANT,KAQGJ,IAAI,CAACE,eAAD,CAAJ,CAAsBI,OAAtB,CAA8BkB,GAA9B,CAAkC,CAACC,MAAD,EAAST,KAAT,KACjC,MAAC,gBAAD;AACE,IAAA,GAAG,EAAEA,KADP;AAEE,IAAA,KAAK,EAAG,GAAEA,KAAM,EAFlB;AAGE,IAAA,OAAO,EAAE,MAAC,KAAD;AAAO,MAAA,KAAK,EAAC;AAAb,MAHX;AAIE,IAAA,KAAK,EAAES,MAAM,CAACC;AAJhB,IADD,CARH,CADF,CAFF,CAHJ,CATF,EAoCG,CAAClB,MAAD,IACC,MAAC,UAAD,QACE,iBADF,EAEE,MAAC,MAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbS,MAAAA,YAAY,CAACf,eAAe,GAAG,CAAnB,CAAZ;AACD,KAHH;AAIE,IAAA,OAAO,EAAC,WAJV;AAKE,IAAA,KAAK,EAAC,SALR;AAME,IAAA,SAAS,EAAE;AANb,KAQGA,eAAe,KAAKF,IAAI,CAACP,MAAL,GAAc,CAAlC,GACG,kCADH,GAEG,kBAVN,CAFF,EAcE,MAAC,UAAD;AACE,IAAA,IAAI,EAAES,eAAe,GAAG,CAD1B;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,KAAK,EAAE;AAAEyB,MAAAA,SAAS,EAAE;AAAb,KAHT;AAIE,IAAA,KAAK,EAAE3B,IAAI,CAACP,MAJd;AAKE,IAAA,QAAQ,EAAE,CAAC6B,KAAD,EAAQlB,KAAR,KAAkB;AAC1Ba,MAAAA,YAAY,CAACb,KAAK,GAAG,CAAT,CAAZ;AACD;AAPH,IAdF,CArCJ,CADF,CAJF,CADF;AAwED,CA9GD;;AAgHA,OAAO,eAAewB,kBAAf,CAAkCC,OAAlC,EAA2C;AAChD,QAAM;AAAEC,IAAAA;AAAF,MAASD,OAAO,CAACE,KAAvB;AACA,QAAMC,IAAI,GAAG,MAAM5C,cAAc,CAAC6C,OAAf,CAAuBH,EAAvB,CAAnB;;AACA,MAAI,CAACE,IAAL,EAAW;AACTd,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,WAAO;AACLe,MAAAA,KAAK,EAAE;AAAElC,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,OAAO,EAAE;AAArB;AADF,KAAP;AAGD;;AAEDiB,EAAAA,OAAO,CAACC,GAAR,CAAYa,IAAI,CAACG,SAAjB;AAEA,MAAIC,YAAY,GAAG,CAAC,GAAGJ,IAAI,CAACG,SAAT,CAAnB;AACAC,EAAAA,YAAY,CAACZ,GAAb,CAAkBT,QAAD,IAAc;AAC7B,QAAIsB,gBAAgB,qBAAQtB,QAAR,CAApB;;AACAsB,IAAAA,gBAAgB,CAAC/B,OAAjB,GAA2B+B,gBAAgB,CAAC/B,OAAjB,CAAyBf,OAAzB,EAA3B;AACA,WAAO8C,gBAAP;AACD,GAJD;AAKA,SAAO;AACLH,IAAAA,KAAK,EAAE;AAAElC,MAAAA,IAAI,EAAEoC,YAAR;AAAsBnC,MAAAA,OAAO,EAAEd;AAA/B;AADF,GAAP;AAGD;AAED,eAAeZ,SAAS,CAACwB,IAAD,CAAxB","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  // Card,\n  CardContent,\n  Typography,\n  Box,\n  FormControl,\n  FormLabel,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n} from '@material-ui/core';\nimport { withTheme } from '@material-ui/core/styles';\nimport { blue } from '@material-ui/core/colors';\nimport Head from 'next/head';\nimport { Pagination } from '@material-ui/lab';\nimport {\n  Button,\n  Background,\n  Card,\n  CardTitle,\n  CardFooter,\n  CardActions,\n  QuestionTitle,\n} from './styles';\nimport dataJSON from '../../data.json';\nimport resultsJSON from '../../results.json';\n\nimport quizRepository from '../../repository/quiz/quizRepository';\n\nArray.prototype.shuffle = function () {\n  var i = this.length,\n    j,\n    temp;\n  if (i == 0) return this;\n  while (--i) {\n    j = Math.floor(Math.random() * (i + 1));\n    temp = this[i];\n    this[i] = this[j];\n    this[j] = temp;\n  }\n  return this;\n};\n\nconst Quiz = ({ data, results }) => {\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [value, setValue] = useState(-1);\n  const [answers, setAnswers] = useState([]);\n  const [result, setResult] = useState(false);\n\n  useEffect(() => {\n    setValue(answers[currentQuestion] || -1);\n  }, [currentQuestion]);\n\n  const setCurrentAnswer = () => {\n    let newAnswers = [...answers];\n    newAnswers[currentQuestion] = value;\n    setAnswers(newAnswers);\n  };\n\n  const getFinalValue = () => {\n    let sum = 0;\n    data.forEach((question, index) => {\n      if (answers[index] && answers[index] >= 0)\n        sum += question.answers[answers[index]].value;\n    });\n    return sum;\n  };\n\n  const handleChange = (value) => {\n    setCurrentAnswer();\n    if (value >= data.length) {\n      console.log(answers);\n      const media = getFinalValue() / data.length;\n      if (media < 36) setResult(results[0]);\n      else if (media < 71) setResult(results[1]);\n      else setResult(results[2]);\n      return;\n    }\n    setCurrentQuestion(value);\n  };\n\n  return (\n    <>\n      <Head>\n        <link rel=\"stylesheet\" href=\"/pages/quiz/styles.css\" />\n      </Head>\n      <Background color=\"#456\">\n        <Card className=\"card\">\n          <CardContent>\n            <CardTitle gutterBottom>\n              Que tipo de empreendedor é você durante a crise?\n            </CardTitle>\n            <hr />\n            <p id=\"question\"></p>\n            <form id=\"answers\" action=\"#\"></form>\n          </CardContent>\n          <CardActions>\n            {result && <div dangerouslySetInnerHTML={{ __html: result }}></div>}\n            {!result && data && (\n              <form action=\"#\">\n                <QuestionTitle>{data[currentQuestion].question}</QuestionTitle>\n                <FormControl component=\"fieldset\">\n                  <RadioGroup\n                    aria-label=\"answer\"\n                    name=\"answer\"\n                    onChange={(event) => {\n                      setValue(event.target.value);\n                    }}\n                    value={value}\n                  >\n                    {data[currentQuestion].answers.map((answer, index) => (\n                      <FormControlLabel\n                        key={index}\n                        value={`${index}`}\n                        control={<Radio color=\"primary\" />}\n                        label={answer.text}\n                      />\n                    ))}\n                  </RadioGroup>\n                </FormControl>\n              </form>\n            )}\n          </CardActions>\n          {!result && (\n            <CardFooter>\n              <hr />\n              <Button\n                onClick={() => {\n                  handleChange(currentQuestion + 1);\n                }}\n                variant=\"contained\"\n                color=\"primary\"\n                className={'button'}\n              >\n                {currentQuestion === data.length - 1\n                  ? 'Finalizar e Visualizar Resultado'\n                  : 'Próxima Pergunta'}\n              </Button>\n              <Pagination\n                page={currentQuestion + 1}\n                color=\"primary\"\n                style={{ marginTop: 40 }}\n                count={data.length}\n                onChange={(event, value) => {\n                  handleChange(value - 1);\n                }}\n              />\n            </CardFooter>\n          )}\n        </Card>\n      </Background>\n    </>\n  );\n};\n\nexport async function getServerSideProps(context) {\n  const { id } = context.query;\n  const quiz = await quizRepository.getQuiz(id);\n  if (!quiz) {\n    console.log('Quiz não existe!!!');\n    return {\n      props: { data: {}, results: {} },\n    };\n  }\n\n  console.log(quiz.questions);\n\n  let shuffledData = [...quiz.questions];\n  shuffledData.map((question) => {\n    let shuffledQuestion = { ...question };\n    shuffledQuestion.answers = shuffledQuestion.answers.shuffle();\n    return shuffledQuestion;\n  });\n  return {\n    props: { data: shuffledData, results: resultsJSON },\n  };\n}\n\nexport default withTheme(Quiz);\n"]},"metadata":{},"sourceType":"module"}